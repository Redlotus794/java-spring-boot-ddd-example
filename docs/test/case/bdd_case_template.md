# BDD测试用例模板（Markdown版）

## 一、模板核心说明

1. 核心思想：基于行为驱动开发（BDD）理念，以“用户视角描述业务行为”为核心，采用Gherkin语法（Given-When-Then）清晰拆解前置条件、操作步骤与预期结果，确保测试用例可理解、可复现。

2. 适用场景：适用于功能测试、接口测试、场景化测试等各类测试场景，可根据业务需求（如金融、电商、政务）扩展自定义字段。

3. 使用原则：场景描述需自然语言化（避免技术术语堆砌），预期结果需可量化、可验证（拒绝“页面正常显示”等模糊表述）。

## 二、通用BDD测试用例模板

| 字段名称              | 字段说明                                                     | 示例                                                         |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 用例ID                | 唯一标识，建议命名规则：模块-功能-序号（大写字母+数字）      | ECOM-ORDER-PAY-001                                           |
| 所属模块              | 明确用例归属的业务模块，可多级划分（如“系统-模块-子模块”）   | 电商系统-订单管理-支付模块                                   |
| 业务场景              | 以用户视角描述核心业务行为，说明“谁在什么场景下做什么事”     | 普通用户在电商平台对未付款订单进行微信支付                   |
| 前置条件（Given）     | 执行测试前必须满足的所有条件，包括环境、数据、用户状态等，需明确且可准备 | 1. 测试环境部署完成，订单系统与支付系统接口连通正常；2. 测试用户（账号：test_user01，密码：123456）已注册并登录；3. 该用户存在1笔未付款订单（订单号：E202512240001，金额：199元，商品：休闲T恤）；4. 微信支付渠道已开通，测试账号微信余额充足。 |
| 操作步骤（When）      | 测试执行的核心操作步骤，按时间顺序排列，仅保留关键动作（避免冗余细节） | 1. 测试用户进入“我的订单”页面；2. 找到订单号E202512240001，点击“立即支付”按钮；3. 在支付方式选择页，选中“微信支付”，点击“确认支付”；4. 跳转至微信支付页面，输入支付密码完成支付。 |
| 预期结果（Then）      | 操作完成后应出现的可验证结果，需覆盖界面提示、数据状态、业务规则等维度 | 1. 支付完成后自动跳转回电商订单详情页，显示“支付成功”绿色提示；2. 订单状态更新为“已付款”，页面显示支付时间（精确到秒）；3. 订单支付流水表新增记录（流水号：P202512240001，支付方式：微信，金额：199元，状态：成功）；4. 微信支付平台同步记录该笔交易，测试用户微信余额扣减199元。 |
| 异常/边界场景（可选） | 补充该业务场景下需覆盖的异常情况、边界值场景，明确对应预期结果 | 1. 支付过程中网络中断：重新连接网络后提示“支付中，请稍后查询订单状态”，不重复扣款；2. 微信余额不足：支付页面提示“余额不足，请更换支付方式”，订单状态保持“未付款”；3. 订单超时未支付（超过30分钟）：点击支付时提示“订单已超时，无法支付”。 |
| 测试数据              | 测试过程中需使用的关键数据，包括用户信息、订单信息、参数信息等，便于复用 | 用户账号：test_user01，订单号：E202512240001，支付金额：199元，微信账号：test_wechat01 |
| 优先级                | 用例重要程度，分为高/中/低三级（核心业务场景优先标记“高”）   | 高                                                           |
| 测试类型              | 区分测试类型，如功能测试、接口测试、兼容性测试等             | 功能测试                                                     |
| 执行人                | 测试用例执行人姓名/工号                                      | 张三                                                         |
| 执行时间              | 测试用例实际执行的日期                                       | 2025-12-24                                                   |
| 测试结果              | 执行结果（通过/失败/阻塞），失败/阻塞需补充备注原因          | 通过；失败（备注：支付成功后订单状态未更新，需排查数据库更新逻辑） |

## 三、接口测试专项BDD模板（扩展版）

针对接口测试场景，在通用模板基础上补充接口相关字段，适配API测试的特殊性：

| 扩展字段名称 | 字段说明                                                     | 示例                                                         |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 接口地址     | 被测接口的完整URL（含环境域名）                              | https://test-ecom.com/api/v1/order/pay                       |
| 请求方法     | HTTP请求方法（GET/POST/PUT/DELETE等）                        | POST                                                         |
| 请求头       | 接口请求头参数，如Content-Type、Token、Authorization等       | Content-Type: application/jsonAuthorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... |
| 请求参数     | 接口入参，按格式填写（JSON/Form/Data等），区分必填/选填参数  | {  "orderNo": "E202512240001",  // 必填，订单号  "payType": "WECHAT",         // 必填，支付方式（WECHAT/ALIPAY）  "payAmount": 199             // 必填，支付金额} |
| 响应状态码   | 预期的HTTP响应状态码（如200成功、400参数错误、500服务器错误） | 200                                                          |
| 响应体       | 预期的接口响应数据，仅保留核心字段（确保关键业务字段验证到位） | {  "code": 0,                  // 0表示成功  "msg": "支付成功",  "data": {    "orderNo": "E202512240001",    "payStatus": "PAID",       // 订单支付状态：已付款    "payTime": "2025-12-24 14:30:25",    "tradeNo": "P202512240001"  }} |
| 响应时间     | 预期的接口响应时间（性能指标，可选，单位：ms）               | ≤500ms                                                       |

## 四、使用规范与技巧

### 1. Given-When-Then书写规范

- Given：只描述“前提条件”，不包含操作动作，确保所有条件可提前准备（如数据初始化、环境配置）；

- When：只描述“用户主动操作”或“系统触发动作”，按顺序排列，避免加入结果描述；

- Then：只描述“可验证的结果”，与When的操作一一对应，避免主观判断。

### 2. 场景设计技巧

- 一个用例聚焦一个核心业务场景，避免“大而全”（复杂场景可拆分为多个子用例）；

- 优先覆盖核心业务流程（如订单支付、用户注册），再补充异常/边界场景；

- 测试数据需精准，避免使用“任意订单号”“随机用户”等表述，确保用例可复现。

### 3. 自定义扩展建议

- 金融场景：补充“资金一致性校验”“风控规则验证”字段；

- 高并发场景：补充“并发数”“压力测试指标”字段；

- 兼容性测试：补充“测试环境（浏览器/设备/系统版本）”字段。

## 五、完整示例：订单微信支付BDD测试用例（接口测试）

| 字段名称          | 内容                                                         |
| ----------------- | ------------------------------------------------------------ |
| 用例ID            | ECOM-ORDER-PAY-001                                           |
| 所属模块          | 电商系统-订单管理-支付模块                                   |
| 业务场景          | 普通用户在电商平台对未付款订单进行微信支付                   |
| 前置条件（Given） | 1. 测试环境部署完成，订单系统与微信支付接口连通正常；2. 测试用户（账号：test_user01）已登录，Token有效（eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...）；3. 该用户存在1笔未付款订单（订单号：E202512240001，金额：199元）；4. 微信支付渠道已开通，测试微信账号余额充足。 |
| 操作步骤（When）  | 1. 调用订单支付接口（POST https://test-ecom.com/api/v1/order/pay），传入订单号、支付方式等参数；2. 接收微信支付平台回调通知，验证回调参数；3. 调用订单详情接口，查询订单状态。 |
| 预期结果（Then）  | 1. 支付接口响应码200，响应体code=0，msg=“支付成功”；2. 订单状态更新为“已付款”，支付时间准确记录；3. 支付流水表新增记录，与订单号、微信交易号关联；4. 微信支付回调日志记录完整，参数校验通过。 |
| 异常/边界场景     | 1. 传入不存在的订单号：接口响应码400，msg=“订单不存在”；2. 订单已付款：接口响应码400，msg=“订单已付款，无需重复支付”；3. 微信余额不足：接口响应码400，msg=“支付失败，余额不足”。 |
| 测试数据          | 用户账号：test_user01，Token：eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...，订单号：E202512240001，支付金额：199元，支付方式：WECHAT |
| 优先级            | 高                                                           |
| 测试类型          | 接口测试                                                     |
| 接口地址          | https://test-ecom.com/api/v1/order/pay                       |
| 请求方法          | POST                                                         |
| 请求头            | Content-Type: application/jsonAuthorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... |
| 请求参数          | {  "orderNo": "E202512240001",  "payType": "WECHAT",  "payAmount": 199} |
| 响应状态码        | 200                                                          |
| 响应体            | {  "code": 0,  "msg": "支付成功",  "data": {    "orderNo": "E202512240001",    "payStatus": "PAID",    "payTime": "2025-12-24 14:30:25",    "tradeNo": "P202512240001"  }} |
| 响应时间          | ≤500ms                                                       |
| 执行人            | 张三                                                         |
| 执行时间          | 2025-12-24                                                   |
| 测试结果          | 通过                                                         |

> （注：文档部分内容可能由 AI 生成）